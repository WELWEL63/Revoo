<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Quote</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-family: 'Arial', sans-serif;
            padding: 20px;
        }

        .container {
            margin-top: 30px;
            max-width: 900px;
            background: white;
            padding: 30px;
            border-radius: 12px;
            color: black;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #764ba2;
        }

        .header h1 {
            font-size: 32px;
            color: #5e5e5e;
            font-weight: bold;
        }

        .header p {
            font-size: 18px;
            color: #5e5e5e;
        }

        .btn {
            margin-top: 10px;
            font-size: 16px;
        }

        label {
            font-weight: bold;
        }

        .row {
            display: flex;
            flex-wrap: wrap;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group .form-control {
            width: 100%;
        }

        .col-md-6 {
            flex: 1 1 45%;
            margin-right: 20px;
        }

        .col-md-6:last-child {
            margin-right: 0;
        }

        @media (max-width: 768px) {
            .col-md-6 {
                flex: 1 1 100%;
                margin-right: 0;
            }
        }

        .payment-links {
            margin-top: 20px;
        }

        .payment-links a {
            color: #764ba2;
            text-decoration: underline;
        }

        .payment-links a:hover {
            color: #5e5e5e;
        }

        .payment-info {
            background: #f7f7f7;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 16px;
        }

        .payment-info strong {
            font-weight: bold;
        }

        .form-control {
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

    </style>
</head>

<body>

    <div class="container">
        <div class="header">
            <h1>Edit Your Quote</h1>
            <p>Review the details below and choose your payment method. Once everything looks good, you can proceed with payment.</p>
        </div>

        <form action="{{ url_for('edit_quote', quote_index=index) }}" method="POST">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Quote ID:</label>
                        <input type="text" class="form-control" name="quote_id" value="{{ quote['quote_id'] }}" required readonly>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label>Name:</label>
                        <input type="text" class="form-control" name="name" value="{{ quote['name'] }}" required>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label>Email:</label>
                        <input type="email" class="form-control" name="email" value="{{ quote['email'] }}" required>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label>Phone:</label>
                        <input type="text" class="form-control" name="phone" value="{{ quote['phone'] }}" required>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label>Trip:</label>
                        <input type="text" class="form-control" name="trip" value="{{ quote['trip'] }}" required>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label>Dates:</label>
                        <input type="text" class="form-control" name="dates" value="{{ quote['dates'] }}">
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label>Date:</label>
                        <input type="date" class="form-control" name="date" value="{{ quote['date'] }}">
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label>Adults:</label>
                        <input type="number" class="form-control" name="adults" value="{{ quote['adults'] }}" id="adults" required>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label>Children:</label>
                        <input type="number" class="form-control" name="children" value="{{ quote['children'] }}" id="children" required>
                    </div>
                </div>

                <!-- Price per Adult and Child -->
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Price per Adult:</label>
                        <input type="number" class="form-control" name="price_per_adult" value="{{ quote['price_per_adult'] }}" id="price_per_adult" required>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label>Price per Child:</label>
                        <input type="number" class="form-control" name="price_per_child" value="{{ quote['price_per_child'] }}" id="price_per_child" required>
                    </div>
                </div>

                <!-- Discount -->
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Discount:</label>
                        <input type="number" class="form-control" name="discount" value="{{ quote['discount'] }}" id="discount">
                    </div>
                </div>

                <!-- Total Price -->
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Total Price:</label>
                        <input type="number" class="form-control" name="total_price" value="{{ quote['total_price'] }}" id="total_price" readonly>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label>Stay:</label>
                        <input type="text" class="form-control" name="stay" value="{{ quote['stay'] }}">
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label>Special Requests:</label>
                        <textarea class="form-control" name="special_requests">{{ quote['special_requests'] }}</textarea>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label>Details:</label>
                        <textarea class="form-control" name="details">{{ quote['details'] }}</textarea>
                    </div>
                </div>

            </div>

            <!-- Payment Method -->
            <div class="col-md-12">
                <div class="form-group">
                    <label>Select Payment Method:</label>
                    <select class="form-control" name="payment_method" id="payment_method" required>
                        <option value="">Choose one...</option>
                        <option value="paypal">PayPal</option>
                        <option value="credit_card">Credit Card</option>
                        <option value="bank_transfer">Bank Transfer</option>
                    </select>
                </div>
            </div>

            <button type="submit" class="btn btn-primary w-100"><i class="fas fa-save"></i> Save Changes</button>
        </form>

        <form action="{{ url_for('send_quote_email', quote_index=index) }}" method="POST">
            <button type="submit" class="btn btn-success w-100"><i class="fas fa-paper-plane"></i> Send Quote via Email</button>
        </form>

        

        <a href="{{ url_for('manage_quotes') }}" class="btn btn-secondary w-100"><i class="fas fa-arrow-left"></i> Back to Quotes</a>
    </div>

    <script>
        document.getElementById('adults').addEventListener('input', calculateTotalPrice);
        document.getElementById('children').addEventListener('input', calculateTotalPrice);
        document.getElementById('price_per_adult').addEventListener('input', calculateTotalPrice);
        document.getElementById('price_per_child').addEventListener('input', calculateTotalPrice);
        document.getElementById('discount').addEventListener('input', calculateTotalPrice);

        function calculateTotalPrice() {
            const adults = parseInt(document.getElementById('adults').value) || 0;
            const children = parseInt(document.getElementById('children').value) || 0;
            const pricePerAdult = parseFloat(document.getElementById('price_per_adult').value) || 0;
            const pricePerChild = parseFloat(document.getElementById('price_per_child').value) || 0;
            const discount = parseFloat(document.getElementById('discount').value) || 0;

            const totalPrice = (adults * pricePerAdult) + (children * pricePerChild) - discount;
            document.getElementById('total_price').value = totalPrice.toFixed(2);
        }

        function showPaymentLink() {
            const paymentMethod = document.getElementById('payment_method').value;
            const paymentLinkDiv = document.getElementById('payment_links');
            const paymentLinkElement = document.getElementById('payment_link');
            
            if (paymentMethod === 'paypal') {
                paymentLinkElement.innerHTML = '<a href="https://www.paypal.com/paypalme/yourpaypallink" target="_blank">Pay via PayPal</a>';
                paymentLinkDiv.style.display = 'block';
            } else if (paymentMethod === 'credit_card') {
                paymentLinkElement.innerHTML = '<a href="https://www.paymentgateway.com/credit-card" target="_blank">Pay via Credit Card</a>';
                paymentLinkDiv.style.display = 'block';
            } else if (paymentMethod === 'bank_transfer') {
                paymentLinkElement.innerHTML = 'Bank Transfer: <br> Account Name: YourAccountName <br> Account Number: 1234567890 <br> IBAN: GB00X1234567890';
                paymentLinkDiv.style.display = 'block';
            } else {
                paymentLinkDiv.style.display = 'none';
            }
        }
    </script>

</body>

</html>
